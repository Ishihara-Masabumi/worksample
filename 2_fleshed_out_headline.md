# Python基礎文法シリーズ[1]

## このコースのゴール

Pythonのコードを書き始める前に知っておくべきことについて紹介します。

## Pythonとは

海外で人気があり、Google・Yahooでも利用されています。
Webアプリケーション開発、危害学習、ビッグデータ解析等に使われています。

## Pythonのインストール方法

次のサイトからOSに合わせたバージョンをダウンロードします。
https://www.python.org/downloads/
インストールしたら、コマンドラインから実行してみましょう。

>>> print("Hello World")
Hello World

Python のコマンドラインでは、>>> がプライマリのプロンプト記号です。
続きの行がある場合はセカンダリのプロンプト記号...になります。

## Pythonコマンドとは

文法の特徴はインデントでのブロック構造となっているため、誰が書いても同じような書き方となります。
スクリプト言語で操作しやすい言語です。

## なぜPythonコマンドを覚える必要があるか

DIVE INTO CODEnのAIコースでは、Pythonのバージョン3を主に使用しているからです。

## Pythonプログラムの基本事項

### print関数

表示したい文字列を("と")、あるいは('と')で囲みます。

>>> print("Hello World")
Hello World

>>> print('ハローアリス')
ハローアリス

数値を表示する場合は、(と)のみで囲みます。

>>> print(100)
100
>>> print(3.14)
3.14

### コメント

コメントとは、実行されないけれどもメモや注釈として利用することができます。
Python でプログラム中にコメントを記述する場合、コメントの前に「#」を記述します。
「#」から行末までが全てコメントとなります。

>>> # print("Hello World")
...

>>> print("Hello World") # コメント
Hello World

複数行では'''または"""を用います。

>>> '''
... print("Hello World")
... print("Hello World")
... print("Hello World")
... '''
'\nprint("Hello World")\nprint("Hello World")\nprint("Hello World")\n'

### 変数の利用

文字列の場合は、変数に文字列を""あるいは''で囲んで代入します。

>>> man ='一郎'
>>> print(man)
一郎
>>> print(man + "は、路上を歩いていた")
一郎は、路上を歩いていた
>>> print(man + "は、歩道を走っていた")
一郎は、歩道を走っていた
>>> print(man + "は、ポケモンを倒した")
一郎は、ポケモンを倒した

数字の場合は、数字として表示するか、str関数で文字列に変換して表示します。

>>> num = 10
>>> print(num)
10
>>> print("リンゴを" + str(num) + "個持っている")
リンゴを10個持っている


## Python のタイプとオブジェクト

Pythonでは全てのデータはオブジェクトとして作られます。
タイプというのはそのオブジェクトの種類と言えるものです。

### 数値

Pythonでは整数型、不動小数点型、複素数型の型が扱えます。
算術演算子にはプラス (+)、マイナス (-)、乗算 (*)、除算 (/)、剰余 (%)、 指数 (**) があります。

>>> 2+3
5
>>> 2-3
-1
>>> 2*3
6
>>> 2**3
8
>>> 11%3
2

乱数を利用するにはrandom モジュールのrandom関数を利用します。

>>> import random
>>> random.random()
0.7817423620877094

mathモジュールを利用すれば、数学的な演算に関する関数、定数等を利用できます。
math.piを利用すれば、円周率を得ることができます。

>>> import math
>>> math.pi
3.141592653589793

### 文字列

文字列は''または""で囲みます。
つまり、"で文字列が始まったら"で終わり、'で文字列が始まったら'で終わります。 

>>> a = 'USA'
>>> a
'USA'
>>> a = "Japan"
>>> a
'Japan'

複数行にわたる文字列を記述する場合は、 ''' または """ を用いて文字列を記述することもできます。

>>> b = '''
... Hello
... World
... '''
>>> b
'\nHello\nWorld\n'

文字列の結合をするために + 演算子が使えます。

>>> a = 'Hello'
>>> b = 'world'
>>> a + ' ' + b
'Hello world'

### リスト

Pythonにはリストというオブジェクトがあります。
リストは、カンマで区切りられた複数の要素から構成され、要素が順に並んでいるものになります。
リストは要素としてあらゆるオブジェクトを持つことが出来ます。

※要素
リストは複数の値を格納することができますが、その格納するそれぞれの値のことを要素と言います。

実際にリストを使用して、その概念について学びましょう。
リストを定義するためには[ ](角括弧)を使用します。
sample_listという変数に、次のリストを代入します。

>>> sample_list = [2015,2016,2017]
>>> sample_list
[2015, 2016, 2017]

>>> sample_list = [1,3.14,'Tokyo','一郎']
>>> sample_list
[1, 3.14, 'Tokyo', '一郎']

リストの各要素は、インデックスで表すことができます。

>>> sample_list[0]
1
>>> sample_list[1]
3.14

リストは、後から要素を変更することができます。

>>> sample_list[2] = 'Nagota'
>>> sample_list[3] = '次郎'
>>> sample_list
[1, 3.14, 'Nagota', '次郎']

※Python対話型インタプリタが起動していない場合、ターミナルで`python`と入力し実行しましょう。

### タプル

タプルは、リストと同様複数のオブジェクトをひとつにまとめたものです。 
タプルは( )で括って記述します。

>>> sample_tuple = ('Tanaka','Tokyo',27)
>>> sample_tuple
('Tanaka', 'Tokyo', 27)

タプル内の各要素にはインデックスでアクセスできます。

>>> sample_tuple[0]
'Tanaka'
>>> sample_tuple[1]
'Tokyo'
>>> sample_tuple[2]
27

※リストとの違いは、タプルは要素への値の代入ができないことです。

>>> sample_tuple[1] = 'Kyoto'
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: 'tuple' object does not support item assignment

エラーを起こすことがわかります。

### ディクショナリ

ディクショナリは、キーと値のペアを保持するオブジェクトです。
ディクショナリは{ }で記述することができます。
また、ディクショナリはキーをインデックスとして値を表示することができます。

>>> sample_dict = {'name':'Tanaka','age':27}
>>> sample_dict['name']
'Tanaka'
>>> sample_dict['age']
27

ディクショナリは後から変更することができます。

>>> sample_dict['age'] = 28
>>> sample_dict
{'name': 'Tanaka', 'age': 28}

キーのリスト、および値のリストは keys()、values() 関数を使って次のように取得できます。

>>> sample_dict.keys()
dict_keys(['name', 'age'])
>>> sample_dict.values()
dict_values(['Tanaka', 27])

### セット

セットとは、順序付けも重複もされていないユニークな要素だけで構成されたものです。
リストからセットを作成することができます。

>>> sample_list = ['a','a','b','c','c','a']
>>> sample_list
['a', 'a', 'b', 'c', 'c', 'a']
>>> sample_set = set(sample_list)
>>> sample_set
{'a', 'b', 'c'}

文字列からセットを作成することができます。

>>> sample_set = set('pepper')
>>> sample_set
{'e', 'p', 'r'}

## 制御文

### ヘッダとステートメントブロック

次のPythonコードについて考えてみましょう。

>>> x = 1
>>> if x == 0:
...     print('true')
... else:
...     print('false')
...     x = 0
...
false

これを実行するとfalseを出力します。
if文による条件分岐と演算子にについては別途説明しますが、ここではその構文に注目します。

ここではまずif文があり、その条件によって実行されるブロックがあります。 
この場合if文がヘッダになり、実行ブロックがそのヘッダに付随するステートメントブロックと呼ばれます。
ステートメントブロックは何行であっても構いません。
このように、ヘッダ行とネストされたステートメントブロックの組合せからなる構文を複合文といいます。

Pythonでは、ヘッダ行の終わりのコロン：は必須です。

ステートメントブロックは、インデント量を揃えることによって同一ブロックであることを表します。
つまり、ブロックの最初のステートメントのインデントと同じだけインデントしているステートメントが同じブロックとみなされます。

### if文

条件を判断して処理を分岐させるには、if文を用います。
先ほどのPythonコードは、xが0であれば'true'を出力し、そうでなければ'false'を出力するというものです。

>>> x = 1
>>> if x == 0:
...     print('true')
... else:
...     print('false')
...     x = 0
...
false

複数の条件分岐をを評価する場合は次のように、 elifを用います。

>>> x = 1
>>> if x == 0:
...     print('x = 0')
... elif x > 0:
...     print('x > 0')
... else:
...     print('x < 0')
...
x > 0

関係演算子には次の種類があります。

<	より小さい
<=	同じか小さい
>	より大きい
>=	同じか大きい
==	等しい
!=	異なる

また論理演算子は次のとおりです。

and	かつ
or	または
not	否定

論理演算子を使うと複数の条件を評価することができます。

>>> x = 1
>>> if 0 < x and x < 10:
...     print('xはゼロより大きく10より小さい')
... else:
...     print('xはゼロより小さいか、10より大きい')
...
xはゼロより大きく10より小さい

### for文

for文はある決められた回数だけ処理を行います。
次のPythonコードは、リストの要素の数だけ処理を行います。

>>> sample_list = ['Tokyo','Oosaka','Nagoya']
>>> for x in sample_list:
...     print (x)
...
Tokyo
Oosaka
Nagoya

0, 1, 2, ... といった整数を利用する場合は、range関数を利用します。

>>> for i in range(5):
...     print (i)
...
0
1
2
3
4

※range関数には始まりの数値、最後の数値?1、増加する量の3つの引数があります。
　このうち始まりの数値と増加する量は省略することができます。

>>> for i in range(10,20,2):
...     print(i)
...
10
12
14
16
18

forを二重ループにすることもできます。

>>> for i in range(5):
...     for j in range(5):
...             print (i*j)
...
0
0
0
0
0
0
1
2
3
4
0
2
4
6
8
0
3
6
9
12
0
4
8
12
16

### while文

while文は条件文が真である間、処理が繰り返されます。

>>> x = 5
>>> while 0 < x:
...     print(x)
...     x += -1
...
5
4
3
2
1

次のような複利の計算に利用することができます。

>>> amount = 10000
>>> year = 2000
>>> while amount <= 20000:
...     year += 1
...     amount *= 1.05
...     print('year = ' + str(year) + ', amount = ' + str(int(amount)))
...
year = 2001, amount = 10500
year = 2002, amount = 11025
year = 2003, amount = 11576
year = 2004, amount = 12155
year = 2005, amount = 12762
year = 2006, amount = 13400
year = 2007, amount = 14071
year = 2008, amount = 14774
year = 2009, amount = 15513
year = 2010, amount = 16288
year = 2011, amount = 17103
year = 2012, amount = 17958
year = 2013, amount = 18856
year = 2014, amount = 19799
year = 2015, amount = 20789

※数値を整数に変換するには、int関数を用います。

>>> int(5.9)
5
>>> int(-11.2)
-11

※16進数を10進数に変換するには、次のように指定します。

>>> int("FF", 16)
255

## 関数オブジェクト

### defによる関数オブジェクトの作成

defによって関数オブジェクトを定義することができます。
()の中が引数となります。
returnは関数の戻り値を指定します。

>>> def plus(x, y):
...     return x + y
...
>>> plus(1000, 2000)
3000

※returnを使えば、帰ってきたデータを変数に代入することもできます。

>>> num = plus(1000, 2000)
>>> print (num)
3000

※returnは必須ではありません。returnが無い場合はNoneを返します。

>>> def sum(x, y):
...     print(x + y)
...
>>> sum(1000, 2000)
3000
>>> num = sum(1000, 2000)
3000
>>> print (num)
None

※pythonでは、関数呼び出しの前に関数を定義しなければなりません。
　ただし、ひとたび関数を定義すれば、関数を定義した後で何度もその関数を呼び出すことができます。

Pythonでは動的に型が決まるので、文字列を与えることもできます。

>>> plus('hello',' world')
'hello world'

### ラムダ (lambda) による無名関数の作成

lambda (ラムダ式) を用いると、無名関数を定義できます。
コロンを挟んで左側が引数、右側が返り値と覚えておけば問題無いと思います。

>>> func = lambda x,y: x + y
>>> func(1000, 2000)
3000

※無名関数を使って、変数に代入することができます。

>>> sum = (lambda x, y: x + y)(1000, 2000)
>>> sum
3000

無名関数をマップ関数に渡すことにより、リスト全体に無名関数を適用することができます。
マップ関数とは、リストの要素に演算を適用してくれる関数です。

>>> func = lambda x: x**2
>>> sample_list = [1,2,3]
>>> list(map(func, sample_list))
[1, 4, 9]

※マップ関数はlist関数に渡してリストを生成します
二次元リストに対しても適用できます。

>>> two_list = [[1,2],[3,4],[5,6]]
>>> func2 = lambda x:x[0]+x[1]
>>> list(map(func2, two_list))
[3, 7, 11]



